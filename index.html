<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jezy Shopping - Habille tes rêves</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        :root {
            --primary: #000000;
            --secondary: #FFD700;
            --background: #F2F2F2;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--background);
        }
        
        .btn {
            border-radius: 12px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
        }
        
        .btn-primary {
            background-color: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #333333;
        }
        
        .btn-secondary {
            background-color: var(--secondary);
            color: var(--primary);
        }
        
        .btn-secondary:hover {
            background-color: #FFC000;
        }
        
        .btn-danger {
            background-color: #EF4444;
            color: white;
        }
        
        .btn-danger:hover {
            background-color: #DC2626;
        }
        
        .product-card {
            transition: all 0.3s ease;
            border-radius: 12px;
            overflow: hidden;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
        }
        
        .cart-item {
            transition: all 0.3s ease;
        }
        
        .cart-item:hover {
            background-color: rgba(242, 242, 242, 0.5);
        }
        
        .hero-section {
            background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('https://images.unsplash.com/photo-1483985988355-763728e1935b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80');
            background-size: cover;
            background-position: center;
            height: 80vh;
        }
        
        .quantity-selector input {
            width: 50px;
            text-align: center;
        }
        
        /* Animation for cart notification */
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
            40% {transform: translateY(-10px);}
            60% {transform: translateY(-5px);}
        }
        
        .bounce {
            animation: bounce 1s;
        }
        
        /* Admin sidebar */
        .admin-sidebar {
            transition: all 0.3s ease;
            height: calc(100vh - 64px);
        }
        
        .admin-content {
            transition: all 0.3s ease;
        }
        
        @media (max-width: 768px) {
            .admin-sidebar {
                transform: translateX(-100%);
                position: fixed;
                height: 100vh;
                z-index: 50;
                width: 80%;
            }
            
            .admin-sidebar.active {
                transform: translateX(0);
            }
            
            .admin-content {
                margin-left: 0 !important;
            }
            
            .hero-section {
                height: 60vh;
            }
        }
        
        /* Form styles */
        .form-input {
            border-radius: 8px;
            border: 1px solid #E5E7EB;
            transition: all 0.3s ease;
        }
        
        .form-input:focus {
            border-color: var(--secondary);
            box-shadow: 0 0 0 3px rgba(255, 215, 0, 0.2);
        }
        
        /* Table styles */
        .admin-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
        }
        
        .admin-table th {
            background-color: #F3F4F6;
            text-align: left;
            padding: 12px 16px;
            border-bottom: 2px solid #E5E7EB;
        }
        
        .admin-table td {
            padding: 12px 16px;
            border-bottom: 1px solid #E5E7EB;
        }
        
        .admin-table tr:hover td {
            background-color: #F9FAFB;
        }
        
        /* Toggle switch */
        .toggle-checkbox:checked {
            right: 0;
            border-color: var(--secondary);
            background-color: var(--secondary);
        }
        
        .toggle-checkbox:checked + .toggle-label {
            background-color: rgba(255, 215, 0, 0.2);
        }
        
        /* Image upload preview */
        .image-preview-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }
        
        .image-preview {
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            height: 100px;
        }
        
        .image-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .remove-image {
            position: absolute;
            top: 5px;
            right: 5px;
            background-color: rgba(239, 68, 68, 0.8);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }
        
        /* Loading spinner */
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: var(--secondary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Logo styling */
        .logo-container {
            background: linear-gradient(135deg, #000000, #434343);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 18px;
        }
        
        /* Cart sidebar */
        .cart-sidebar {
            transition: all 0.3s ease;
            transform: translateX(100%);
        }
        
        .cart-sidebar.active {
            transform: translateX(0);
        }
        
        /* Overlay */
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 40;
        }
        
        .overlay.active {
            display: block;
        }
        
        /* Loading overlay */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--secondary);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
        }
        
        /* Success message */
        .success-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            text-align: center;
            z-index: 1001;
            max-width: 400px;
            width: 90%;
        }
        
        .success-icon {
            color: #10B981;
            font-size: 48px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">
    <!-- Header -->
    <header class="bg-white shadow-md sticky top-0 z-40">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center">
                <div class="logo-container mr-3">
                    <span>JEZY</span>
                </div>
                <h1 class="text-xl font-bold text-black">Jezy Shopping</h1>
            </div>
            
            <nav class="hidden md:flex space-x-6">
                <a href="#" class="text-black hover:text-yellow-500 font-medium">Accueil</a>
                <a href="#shop" class="text-black hover:text-yellow-500 font-medium">Boutique</a>
                <a href="#about" class="text-black hover:text-yellow-500 font-medium">À propos</a>
                <a href="#contact" class="text-black hover:text-yellow-500 font-medium">Contact</a>
            </nav>
            
            <div class="flex items-center space-x-4">
                <button id="cart-btn" class="relative">
                    <i class="fas fa-shopping-cart text-xl text-black"></i>
                    <span id="cart-count" class="absolute -top-2 -right-2 bg-yellow-500 text-black text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center">0</span>
                </button>
                
                <button id="mobile-menu-btn" class="md:hidden text-black">
                    <i class="fas fa-bars text-xl"></i>
                </button>
                
                <button id="admin-login-btn" class="hidden md:block btn btn-secondary px-4 py-2">
                    <i class="fas fa-user-shield mr-2"></i> Admin
                </button>
            </div>
        </div>
        
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="md:hidden bg-white shadow-lg hidden absolute w-full z-50">
            <div class="container mx-auto px-4 py-3 flex flex-col space-y-3">
                <a href="#" class="text-black hover:text-yellow-500 font-medium py-2 border-b">Accueil</a>
                <a href="#shop" class="text-black hover:text-yellow-500 font-medium py-2 border-b">Boutique</a>
                <a href="#about" class="text-black hover:text-yellow-500 font-medium py-2 border-b">À propos</a>
                <a href="#contact" class="text-black hover:text-yellow-500 font-medium py-2 border-b">Contact</a>
                <button id="mobile-admin-login-btn" class="text-black hover:text-yellow-500 font-medium py-2 text-left">
                    <i class="fas fa-user-shield mr-2"></i> Admin
                </button>
            </div>
        </div>
    </header>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loading-spinner"></div>
    </div>

    <!-- Success Message Modal -->
    <div id="success-message" class="success-message hidden">
        <div class="success-icon">
            <i class="fas fa-check-circle"></i>
        </div>
        <h3 class="text-xl font-bold mb-2">Message envoyé avec succès!</h3>
        <p class="text-gray-600 mb-4">Votre message a été préparé pour WhatsApp. Redirection en cours...</p>
        <p class="text-sm text-gray-500">Si la redirection ne fonctionne pas, vérifiez que WhatsApp est installé sur votre appareil.</p>
    </div>

    <!-- Main Content -->
    <main class="flex-grow" id="main-content">
        <!-- Hero Section -->
        <section class="hero-section flex items-center justify-center text-center text-white">
            <div class="container mx-auto px-4">
                <h1 class="text-4xl md:text-6xl font-bold mb-4">Jezy Shopping</h1>
                <h2 class="text-2xl md:text-3xl font-medium mb-8">Habille tes rêves</h2>
                <a href="#shop" class="btn btn-secondary px-8 py-3 text-lg font-bold">Voir la boutique</a>
            </div>
        </section>

        <!-- Featured Products -->
        <section id="shop" class="py-12 bg-white">
            <div class="container mx-auto px-4">
                <h2 class="text-3xl font-bold text-center mb-12">Nos Produits</h2>
                
                <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8" id="products-grid">
                    <!-- Product cards will be inserted here by JavaScript -->
                </div>
                
                <div class="mt-12 text-center">
                    <button id="load-more" class="btn btn-primary px-6 py-2 hidden">Voir plus</button>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="py-12 bg-gray-100">
            <div class="container mx-auto px-4">
                <div class="flex flex-col md:flex-row items-center">
                    <div class="md:w-1/2 mb-8 md:mb-0 md:pr-8">
                        <img src="https://images.unsplash.com/photo-1523381210434-271e8be1f52b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80" alt="About Jezy Shopping" class="rounded-lg shadow-lg w-full">
                    </div>
                    <div class="md:w-1/2">
                        <h2 class="text-3xl font-bold mb-6">À propos de Jezy Shopping</h2>
                        <p class="text-lg mb-4">Jezy Shopping est bien plus qu'une simple boutique en ligne. C'est une destination où le style rencontre la commodité, où chaque clic vous rapproche de votre garde-robe idéale.</p>
                        <p class="text-lg mb-4">Notre mission est de vous offrir une expérience de shopping en ligne fluide, avec une sélection soigneusement choisie de vêtements et accessoires qui reflètent les dernières tendances tout en restant abordables.</p>
                        <p class="text-lg">Que vous cherchiez une tenue pour une occasion spéciale ou simplement pour rafraîchir votre garde-robe quotidienne, Jezy Shopping a ce qu'il vous faut.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="py-12 bg-white">
            <div class="container mx-auto px-4">
                <h2 class="text-3xl font-bold text-center mb-12">Contactez-nous</h2>
                
                <div class="max-w-2xl mx-auto bg-gray-100 rounded-lg p-8 shadow-md">
                    <form id="contact-form">
                        <div class="mb-4">
                            <label for="contact-name" class="block text-gray-700 font-medium mb-2">Nom</label>
                            <input type="text" id="contact-name" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500" required>
                        </div>
                        <div class="mb-4">
                            <label for="contact-email" class="block text-gray-700 font-medium mb-2">Email</label>
                            <input type="email" id="contact-email" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500" required>
                        </div>
                        <div class="mb-4">
                            <label for="contact-message" class="block text-gray-700 font-medium mb-2">Message</label>
                            <textarea id="contact-message" rows="4" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary w-full py-3 font-bold">Envoyer via WhatsApp</button>
                    </form>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-black text-white py-8">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between">
                <div class="mb-6 md:mb-0">
                    <div class="flex items-center mb-4">
                        <div class="logo-container mr-2">
                            <span>JEZY</span>
                        </div>
                        <h3 class="text-xl font-bold">Jezy Shopping</h3>
                    </div>
                    <p class="text-gray-400">Habille tes rêves avec style et élégance.</p>
                </div>
                
                <div class="mb-6 md:mb-0">
                    <h4 class="text-lg font-bold mb-4">Liens rapides</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-yellow-500">Accueil</a></li>
                        <li><a href="#shop" class="text-gray-400 hover:text-yellow-500">Boutique</a></li>
                        <li><a href="#about" class="text-gray-400 hover:text-yellow-500">À propos</a></li>
                        <li><a href="#contact" class="text-gray-400 hover:text-yellow-500">Contact</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="text-lg font-bold mb-4">Contact</h4>
                    <ul class="space-y-2">
                        <li class="flex items-center">
                            <i class="fas fa-phone-alt mr-2 text-yellow-500"></i>
                            <span class="text-gray-400">+243 83 83 68 906</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fas fa-envelope mr-2 text-yellow-500"></i>
                            <span class="text-gray-400">contact@jezyshopping.com</span>
                        </li>
                        <li class="flex items-center">
                            <i class="fab fa-whatsapp mr-2 text-yellow-500"></i>
                            <a href="https://wa.me/243838368906" class="text-gray-400 hover:text-yellow-500">WhatsApp</a>
                        </li>
                    </ul>
                </div>
            </div>
            
            <div class="border-t border-gray-800 mt-8 pt-6 text-center text-gray-400">
                <p>&copy; 2023 Jezy Shopping. Tous droits réservés.</p>
            </div>
        </div>
    </footer>

    <!-- Cart Sidebar -->
    <div class="overlay" id="cart-overlay"></div>
    <div class="fixed top-0 right-0 w-full md:w-96 h-full bg-white shadow-lg z-50 cart-sidebar" id="cart-sidebar">
        <div class="p-6 h-full flex flex-col">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">Votre Panier</h2>
                <button id="close-cart" class="text-gray-500 hover:text-black">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <div class="flex-grow overflow-y-auto mb-4" id="cart-items">
                <!-- Cart items will be inserted here -->
            </div>
            
            <div class="border-t pt-4">
                <div class="flex justify-between mb-4">
                    <span class="font-medium">Total:</span>
                    <span id="cart-total" class="font-bold">0 €</span>
                </div>
                <button id="checkout-btn" class="btn btn-primary w-full py-3 font-bold">Passer la commande</button>
            </div>
        </div>
    </div>

    <!-- Checkout Modal -->
    <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden" id="checkout-modal">
        <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4">
            <h2 class="text-2xl font-bold mb-6">Informations de livraison</h2>
            <form id="checkout-form">
                <div class="mb-4">
                    <label for="customer-firstname" class="block text-gray-700 font-medium mb-2">Prénom</label>
                    <input type="text" id="customer-firstname" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500 form-input" required>
                </div>
                <div class="mb-4">
                    <label for="customer-lastname" class="block text-gray-700 font-medium mb-2">Nom</label>
                    <input type="text" id="customer-lastname" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500 form-input" required>
                </div>
                <div class="mb-4">
                    <label for="customer-phone" class="block text-gray-700 font-medium mb-2">Téléphone</label>
                    <input type="tel" id="customer-phone" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500 form-input" required>
                </div>
                <div class="mb-4">
                    <label for="customer-address" class="block text-gray-700 font-medium mb-2">Adresse complète</label>
                    <textarea id="customer-address" rows="3" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500 form-input" required></textarea>
                </div>
                <div class="flex justify-end space-x-4">
                    <button type="button" id="cancel-checkout" class="btn btn-secondary px-4 py-2">Annuler</button>
                    <button type="submit" class="btn btn-primary px-4 py-2">Envoyer la commande via WhatsApp</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Admin Login Modal -->
    <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden" id="admin-login-modal">
        <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4">
            <h2 class="text-2xl font-bold mb-6">Connexion Admin</h2>
            <form id="admin-login-form">
                <div class="mb-4">
                    <label for="admin-password" class="block text-gray-700 font-medium mb-2">Mot de passe</label>
                    <input type="password" id="admin-password" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500">
                </div>
                <div class="flex justify-end space-x-4">
                    <button type="button" id="cancel-admin-login" class="btn btn-secondary px-4 py-2">Annuler</button>
                    <button type="submit" class="btn btn-primary px-4 py-2">Se connecter</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Admin Panel -->
    <div class="fixed inset-0 bg-white z-50 hidden" id="admin-panel">
        <div class="flex h-full">
            <!-- Admin Sidebar -->
            <div class="admin-sidebar bg-gray-800 text-white w-64 flex-shrink-0 overflow-y-auto">
                <div class="p-4 border-b border-gray-700">
                    <h2 class="text-xl font-bold">Panel Admin</h2>
                    <p class="text-gray-400 text-sm">Gestion des produits</p>
                </div>
                
                <nav class="p-4">
                    <ul class="space-y-2">
                        <li>
                            <button class="admin-nav-btn w-full text-left px-4 py-2 rounded-lg bg-gray-900 text-yellow-500" data-tab="products">
                                <i class="fas fa-box mr-2"></i> Gestion des produits
                            </button>
                        </li>
                        <li>
                            <button class="admin-nav-btn w-full text-left px-4 py-2 rounded-lg hover:bg-gray-700" data-tab="orders">
                                <i class="fas fa-shopping-bag mr-2"></i> Commandes
                            </button>
                        </li>
                        <li>
                            <button class="admin-nav-btn w-full text-left px-4 py-2 rounded-lg hover:bg-gray-700" data-tab="customers">
                                <i class="fas fa-users mr-2"></i> Clients
                            </button>
                        </li>
                    </ul>
                </nav>
                
                <div class="p-4 border-t border-gray-700 mt-auto">
                    <button id="logout-admin" class="btn btn-secondary w-full">
                        <i class="fas fa-sign-out-alt mr-2"></i> Déconnexion
                    </button>
                </div>
            </div>
            
            <!-- Admin Content -->
            <div class="admin-content flex-grow overflow-y-auto">
                <div class="p-6 border-b bg-white flex justify-between items-center">
                    <h2 class="text-2xl font-bold">Gestion des produits</h2>
                    <button id="close-admin" class="text-gray-500 hover:text-black">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                
                <div class="p-6">
                    <!-- Products Management Tab -->
                    <div id="products-tab" class="admin-tab">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-xl font-bold">Liste des produits</h3>
                            <button id="add-product-btn" class="btn btn-primary">
                                <i class="fas fa-plus mr-2"></i> Ajouter un produit
                            </button>
                        </div>
                        
                        <div class="bg-white rounded-lg shadow overflow-hidden">
                            <table class="admin-table">
                                <thead>
                                    <tr>
                                        <th>Image</th>
                                        <th>Nom</th>
                                        <th>Prix</th>
                                        <th>Livraison</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="admin-products-list">
                                    <!-- Products will be inserted here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- Add/Edit Product Modal -->
                    <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden" id="product-modal">
                        <div class="bg-white rounded-lg p-8 max-w-2xl w-full mx-4 max-h-screen overflow-y-auto">
                            <h2 class="text-2xl font-bold mb-6" id="product-modal-title">Ajouter un produit</h2>
                            <form id="product-form">
                                <input type="hidden" id="product-id">
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div class="md:col-span-2">
                                        <label for="product-name" class="block text-gray-700 font-medium mb-2">Nom du produit</label>
                                        <input type="text" id="product-name" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500 form-input" required>
                                    </div>
                                    
                                    <div class="md:col-span-2">
                                        <label for="product-description" class="block text-gray-700 font-medium mb-2">Description</label>
                                        <textarea id="product-description" rows="3" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500 form-input"></textarea>
                                    </div>
                                    
                                    <div>
                                        <label for="product-price" class="block text-gray-700 font-medium mb-2">Prix (€)</label>
                                        <input type="number" id="product-price" step="0.01" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500 form-input" required>
                                    </div>
                                    
                                    <div>
                                        <label for="product-shipping" class="block text-gray-700 font-medium mb-2">Frais de livraison (€)</label>
                                        <input type="number" id="product-shipping" step="0.01" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500 form-input" required>
                                    </div>
                                    
                                    <div class="md:col-span-2">
                                        <label for="product-category" class="block text-gray-700 font-medium mb-2">Catégorie</label>
                                        <select id="product-category" class="w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-500 form-input">
                                            <option value="vetements">Vêtements</option>
                                            <option value="accessoires">Accessoires</option>
                                            <option value="chaussures">Chaussures</option>
                                        </select>
                                    </div>
                                    
                                    <div class="md:col-span-2">
                                        <label class="block text-gray-700 font-medium mb-2">Image du produit</label>
                                        <div class="border-2 border-dashed border-gray-300 rounded-lg p-4 text-center">
                                            <input type="file" id="product-image" class="hidden" accept="image/*">
                                            <div id="image-preview-container" class="image-preview-container mb-4">
                                                <!-- Image preview will be inserted here -->
                                            </div>
                                            <button type="button" id="upload-image-btn" class="btn btn-secondary">
                                                <i class="fas fa-upload mr-2"></i> Choisir une image
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="flex justify-end space-x-4 mt-6">
                                    <button type="button" id="cancel-product" class="btn btn-secondary px-4 py-2">Annuler</button>
                                    <button type="submit" class="btn btn-primary px-4 py-2">Enregistrer</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Configuration Supabase
        const SUPABASE_URL = 'https://lbgyaefrslhepuvcdshd.supabase.co';
        const SUPABASE_KEY = 'sb_publishable_bduj-jQpsnqatfZB58mguQ_-AEDSPPW';
        const BUILD_HOOK = 'https://api.netlify.com/build_hooks/6941d5c669d01fb27b70dec8';
        
        // WhatsApp configuration
        const WHATSAPP_NUMBER = '243838368906';
        
        // Initialiser Supabase
        const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
        
        // Variables globales
        let products = [];
        let cart = JSON.parse(localStorage.getItem('jezy-cart')) || [];
        
        // Éléments DOM
        const productsGrid = document.getElementById('products-grid');
        const cartCount = document.getElementById('cart-count');
        const cartItems = document.getElementById('cart-items');
        const cartTotal = document.getElementById('cart-total');
        const cartBtn = document.getElementById('cart-btn');
        const closeCart = document.getElementById('close-cart');
        const cartSidebar = document.getElementById('cart-sidebar');
        const cartOverlay = document.getElementById('cart-overlay');
        const checkoutBtn = document.getElementById('checkout-btn');
        const checkoutModal = document.getElementById('checkout-modal');
        const checkoutForm = document.getElementById('checkout-form');
        const cancelCheckout = document.getElementById('cancel-checkout');
        const contactForm = document.getElementById('contact-form');
        const adminLoginBtn = document.getElementById('admin-login-btn');
        const mobileAdminLoginBtn = document.getElementById('mobile-admin-login-btn');
        const adminLoginModal = document.getElementById('admin-login-modal');
        const adminLoginForm = document.getElementById('admin-login-form');
        const cancelAdminLogin = document.getElementById('cancel-admin-login');
        const adminPanel = document.getElementById('admin-panel');
        const closeAdmin = document.getElementById('close-admin');
        const logoutAdmin = document.getElementById('logout-admin');
        const adminProductsList = document.getElementById('admin-products-list');
        const addProductBtn = document.getElementById('add-product-btn');
        const productModal = document.getElementById('product-modal');
        const productForm = document.getElementById('product-form');
        const cancelProduct = document.getElementById('cancel-product');
        const productModalTitle = document.getElementById('product-modal-title');
        const uploadImageBtn = document.getElementById('upload-image-btn');
        const productImage = document.getElementById('product-image');
        const imagePreviewContainer = document.getElementById('image-preview-container');
        const mobileMenuBtn = document.getElementById('mobile-menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        const loadingOverlay = document.getElementById('loading-overlay');
        const successMessage = document.getElementById('success-message');
        
        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            loadProducts();
            updateCartCount();
            
            // Charger les produits depuis Supabase
            loadProductsFromSupabase();
        });
        
        // Charger les produits depuis Supabase
        async function loadProductsFromSupabase() {
            try {
                loadingOverlay.classList.remove('hidden');
                
                const { data, error } = await supabaseClient
                    .from('products')
                    .select('*')
                    .order('created_at', { ascending: false });
                
                if (error) {
                    throw error;
                }
                
                if (data && data.length > 0) {
                    // Convertir les données Supabase au format attendu
                    products = data.map(item => ({
                        id: item.id,
                        name: item.name,
                        description: item.description,
                        price: parseFloat(item.price),
                        shippingCost: parseFloat(item.shipping_cost),
                        category: item.category,
                        image: item.image_url
                    }));
                    
                    // Sauvegarder localement pour le cache
                    localStorage.setItem('jezy-products-cache', JSON.stringify(products));
                    localStorage.setItem('jezy-products-cache-date', new Date().toISOString());
                } else {
                    // Si pas de données dans Supabase, utiliser le cache ou les produits par défaut
                    const cacheDate = localStorage.getItem('jezy-products-cache-date');
                    const cache = localStorage.getItem('jezy-products-cache');
                    
                    if (cache && cacheDate) {
                        const cacheAge = new Date() - new Date(cacheDate);
                        // Utiliser le cache s'il a moins de 24 heures
                        if (cacheAge < 24 * 60 * 60 * 1000) {
                            products = JSON.parse(cache);
                        }
                    }
                }
                
                displayProducts();
            } catch (error) {
                console.error('Erreur lors du chargement des produits:', error);
                
                // En cas d'erreur, utiliser le cache ou les produits par défaut
                const cache = localStorage.getItem('jezy-products-cache');
                if (cache) {
                    products = JSON.parse(cache);
                    displayProducts();
                } else {
                    // Produits par défaut en cas d'erreur et pas de cache
                    products = [
                        {
                            id: 1,
                            name: "Robe Élégante",
                            description: "Robe élégante pour toutes occasions",
                            price: 49.99,
                            shippingCost: 5.99,
                            category: "vetements",
                            image: "https://images.unsplash.com/photo-1595777457583-95e059d581b8?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=764&q=80"
                        },
                        {
                            id: 2,
                            name: "Sac à Main",
                            description: "Sac à main tendance et pratique",
                            price: 39.99,
                            shippingCost: 4.99,
                            category: "accessoires",
                            image: "https://images.unsplash.com/photo-1584917865442-de89df76afd3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=735&q=80"
                        }
                    ];
                    displayProducts();
                }
            } finally {
                loadingOverlay.classList.add('hidden');
            }
        }
        
        // Sauvegarder un produit dans Supabase
        async function saveProductToSupabase(product, isNew = true) {
            try {
                loadingOverlay.classList.remove('hidden');
                
                const productData = {
                    name: product.name,
                    description: product.description,
                    price: product.price,
                    shipping_cost: product.shippingCost,
                    category: product.category,
                    image_url: product.image
                };
                
                let result;
                
                if (isNew) {
                    // Ajouter un nouveau produit
                    result = await supabaseClient
                        .from('products')
                        .insert([productData])
                        .select();
                } else {
                    // Mettre à jour un produit existant
                    result = await supabaseClient
                        .from('products')
                        .update(productData)
                        .eq('id', product.id)
                        .select();
                }
                
                if (result.error) {
                    throw result.error;
                }
                
                // Déclencher le rebuild Netlify
                triggerNetlifyBuild();
                
                // Recharger les produits depuis Supabase
                await loadProductsFromSupabase();
                
                return result.data;
            } catch (error) {
                console.error('Erreur lors de la sauvegarde du produit:', error);
                alert('Erreur lors de la sauvegarde du produit. Veuillez réessayer.');
                throw error;
            } finally {
                loadingOverlay.classList.add('hidden');
            }
        }
        
        // Supprimer un produit de Supabase
        async function deleteProductFromSupabase(productId) {
            try {
                loadingOverlay.classList.remove('hidden');
                
                const { error } = await supabaseClient
                    .from('products')
                    .delete()
                    .eq('id', productId);
                
                if (error) {
                    throw error;
                }
                
                // Déclencher le rebuild Netlify
                triggerNetlifyBuild();
                
                // Recharger les produits depuis Supabase
                await loadProductsFromSupabase();
                
                return true;
            } catch (error) {
                console.error('Erreur lors de la suppression du produit:', error);
                alert('Erreur lors de la suppression du produit. Veuillez réessayer.');
                throw error;
            } finally {
                loadingOverlay.classList.add('hidden');
            }
        }
        
        // Déclencher le rebuild Netlify
        async function triggerNetlifyBuild() {
            try {
                const response = await fetch(BUILD_HOOK, {
                    method: 'POST',
                });
                
                if (response.ok) {
                    console.log('Mise à jour du site lancée avec succès !');
                } else {
                    console.error('Erreur lors de la mise à jour du site:', response.statusText);
                }
            } catch (error) {
                console.error('Erreur lors de la mise à jour :', error);
            }
        }
        
        // Afficher les produits
        function displayProducts() {
            productsGrid.innerHTML = '';
            
            if (products.length === 0) {
                productsGrid.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <p class="text-gray-500 text-lg">Aucun produit disponible pour le moment.</p>
                    </div>
                `;
                return;
            }
            
            products.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card bg-white rounded-lg shadow-md overflow-hidden';
                productCard.innerHTML = `
                    <div class="relative overflow-hidden">
                        <img src="${product.image}" alt="${product.name}" class="w-full h-64 object-cover">
                        <div class="absolute top-0 right-0 bg-yellow-500 text-black font-bold px-3 py-1 m-2 rounded-lg">
                            ${product.price.toFixed(2)} €
                        </div>
                    </div>
                    <div class="p-4">
                        <h3 class="text-lg font-bold mb-2">${product.name}</h3>
                        <p class="text-gray-600 mb-4">${product.description}</p>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-500 text-sm">Livraison: ${product.shippingCost.toFixed(2)} €</span>
                            <button class="btn btn-primary add-to-cart" data-id="${product.id}">
                                <i class="fas fa-cart-plus mr-2"></i> Ajouter
                            </button>
                        </div>
                    </div>
                `;
                
                productsGrid.appendChild(productCard);
            });
            
            // Ajouter les événements aux boutons "Ajouter au panier"
            document.querySelectorAll('.add-to-cart').forEach(button => {
                button.addEventListener('click', function() {
                    const productId = parseInt(this.getAttribute('data-id'));
                    addToCart(productId);
                });
            });
        }
        
        // Gestion du panier
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            
            if (product) {
                const existingItem = cart.find(item => item.id === productId);
                
                if (existingItem) {
                    existingItem.quantity += 1;
                } else {
                    cart.push({
                        id: product.id,
                        name: product.name,
                        price: product.price,
                        image: product.image,
                        quantity: 1
                    });
                }
                
                localStorage.setItem('jezy-cart', JSON.stringify(cart));
                updateCartCount();
                updateCartDisplay();
                
                // Animation du compteur
                cartCount.classList.add('bounce');
                setTimeout(() => {
                    cartCount.classList.remove('bounce');
                }, 1000);
            }
        }
        
        function updateCartCount() {
            const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
            cartCount.textContent = totalItems;
            
            if (totalItems > 0) {
                cartCount.classList.remove('hidden');
            } else {
                cartCount.classList.add('hidden');
            }
        }
        
        function updateCartDisplay() {
            cartItems.innerHTML = '';
            
            if (cart.length === 0) {
                cartItems.innerHTML = '<p class="text-center text-gray-500">Votre panier est vide</p>';
                cartTotal.textContent = '0 €';
                return;
            }
            
            let total = 0;
            
            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item flex items-center py-4 border-b';
                cartItem.innerHTML = `
                    <img src="${item.image}" alt="${item.name}" class="w-16 h-16 object-cover rounded-lg">
                    <div class="ml-4 flex-grow">
                        <h4 class="font-medium">${item.name}</h4>
                        <p class="text-gray-600">${item.price.toFixed(2)} €</p>
                        <div class="flex items-center mt-2">
                            <button class="decrease-quantity text-gray-500 hover:text-black" data-id="${item.id}">
                                <i class="fas fa-minus"></i>
                            </button>
                            <span class="mx-2">${item.quantity}</span>
                            <button class="increase-quantity text-gray-500 hover:text-black" data-id="${item.id}">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                    </div>
                    <div class="text-right">
                        <p class="font-bold">${itemTotal.toFixed(2)} €</p>
                        <button class="remove-from-cart text-red-500 hover:text-red-700 mt-2" data-id="${item.id}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                
                cartItems.appendChild(cartItem);
            });
            
            cartTotal.textContent = total.toFixed(2) + ' €';
            
            // Ajouter les événements aux boutons du panier
            document.querySelectorAll('.increase-quantity').forEach(button => {
                button.addEventListener('click', function() {
                    const productId = parseInt(this.getAttribute('data-id'));
                    updateCartQuantity(productId, 1);
                });
            });
            
            document.querySelectorAll('.decrease-quantity').forEach(button => {
                button.addEventListener('click', function() {
                    const productId = parseInt(this.getAttribute('data-id'));
                    updateCartQuantity(productId, -1);
                });
            });
            
            document.querySelectorAll('.remove-from-cart').forEach(button => {
                button.addEventListener('click', function() {
                    const productId = parseInt(this.getAttribute('data-id'));
                    removeFromCart(productId);
                });
            });
        }
        
        function updateCartQuantity(productId, change) {
            const item = cart.find(item => item.id === productId);
            
            if (item) {
                item.quantity += change;
                
                if (item.quantity <= 0) {
                    removeFromCart(productId);
                } else {
                    localStorage.setItem('jezy-cart', JSON.stringify(cart));
                    updateCartCount();
                    updateCartDisplay();
                }
            }
        }
        
        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            localStorage.setItem('jezy-cart', JSON.stringify(cart));
            updateCartCount();
            updateCartDisplay();
        }
        
        // Gestion de l'interface admin
        function displayAdminProducts() {
            adminProductsList.innerHTML = '';
            
            if (products.length === 0) {
                adminProductsList.innerHTML = `
                    <tr>
                        <td colspan="5" class="text-center py-8 text-gray-500">
                            Aucun produit disponible. Cliquez sur "Ajouter un produit" pour commencer.
                        </td>
                    </tr>
                `;
                return;
            }
            
            products.forEach(product => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="py-2">
                        <img src="${product.image}" alt="${product.name}" class="w-12 h-12 object-cover rounded">
                    </td>
                    <td class="font-medium">${product.name}</td>
                    <td>${product.price.toFixed(2)} €</td>
                    <td>${product.shippingCost.toFixed(2)} €</td>
                    <td>
                        <button class="edit-product btn btn-secondary px-3 py-1 mr-2" data-id="${product.id}">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="delete-product btn btn-danger px-3 py-1" data-id="${product.id}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                
                adminProductsList.appendChild(row);
            });
            
            // Ajouter les événements aux boutons d'édition et suppression
            document.querySelectorAll('.edit-product').forEach(button => {
                button.addEventListener('click', function() {
                    const productId = parseInt(this.getAttribute('data-id'));
                    editProduct(productId);
                });
            });
            
            document.querySelectorAll('.delete-product').forEach(button => {
                button.addEventListener('click', function() {
                    const productId = parseInt(this.getAttribute('data-id'));
                    deleteProduct(productId);
                });
            });
        }
        
        function editProduct(productId) {
            const product = products.find(p => p.id === productId);
            
            if (product) {
                document.getElementById('product-id').value = product.id;
                document.getElementById('product-name').value = product.name;
                document.getElementById('product-description').value = product.description;
                document.getElementById('product-price').value = product.price;
                document.getElementById('product-shipping').value = product.shippingCost;
                document.getElementById('product-category').value = product.category;
                
                // Afficher l'image existante
                imagePreviewContainer.innerHTML = `
                    <div class="image-preview">
                        <img src="${product.image}" alt="Preview">
                        <div class="remove-image" onclick="clearImagePreview()">
                            <i class="fas fa-times"></i>
                        </div>
                    </div>
                `;
                
                productModalTitle.textContent = 'Modifier le produit';
                productModal.classList.remove('hidden');
            }
        }
        
        async function deleteProduct(productId) {
            if (confirm('Êtes-vous sûr de vouloir supprimer ce produit ? Cette action est irréversible.')) {
                try {
                    await deleteProductFromSupabase(productId);
                    displayProducts();
                    displayAdminProducts();
                } catch (error) {
                    console.error('Erreur lors de la suppression:', error);
                }
            }
        }
        
        function clearImagePreview() {
            imagePreviewContainer.innerHTML = '';
            productImage.value = '';
        }
        
        // Fonctions pour WhatsApp
        function sendContactMessage() {
            const name = document.getElementById('contact-name').value;
            const email = document.getElementById('contact-email').value;
            const message = document.getElementById('contact-message').value;
            
            const whatsappMessage = `*Nouveau message de contact*\n\n*Nom:* ${name}\n*Email:* ${email}\n*Message:* ${message}\n\n_Message envoyé depuis Jezy Shopping_`;
            
            const encodedMessage = encodeURIComponent(whatsappMessage);
            const whatsappUrl = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodedMessage}`;
            
            // Afficher le message de succès
            successMessage.classList.remove('hidden');
            
            // Ouvrir WhatsApp après un court délai
            setTimeout(() => {
                window.open(whatsappUrl, '_blank');
                successMessage.classList.add('hidden');
                
                // Réinitialiser le formulaire
                contactForm.reset();
            }, 2000);
        }
        
        function sendOrder() {
            const firstName = document.getElementById('customer-firstname').value;
            const lastName = document.getElementById('customer-lastname').value;
            const phone = document.getElementById('customer-phone').value;
            const address = document.getElementById('customer-address').value;
            
            // Calculer le total
            let total = 0;
            cart.forEach(item => {
                total += item.price * item.quantity;
            });
            
            // Construire le message de commande
            let orderDetails = `*NOUVELLE COMMANDE - Jezy Shopping*\n\n`;
            orderDetails += `*Client:* ${firstName} ${lastName}\n`;
            orderDetails += `*Téléphone:* ${phone}\n`;
            orderDetails += `*Adresse:* ${address}\n\n`;
            orderDetails += `*DÉTAIL DE LA COMMANDE:*\n`;
            
            cart.forEach((item, index) => {
                orderDetails += `${index + 1}. ${item.name} x${item.quantity} - ${(item.price * item.quantity).toFixed(2)} €\n`;
            });
            
            orderDetails += `\n*TOTAL: ${total.toFixed(2)} €*\n\n`;
            orderDetails += `_Commande passée via Jezy Shopping_`;
            
            const encodedMessage = encodeURIComponent(orderDetails);
            const whatsappUrl = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodedMessage}`;
            
            // Afficher le message de succès
            successMessage.classList.remove('hidden');
            
            // Ouvrir WhatsApp après un court délai
            setTimeout(() => {
                window.open(whatsappUrl, '_blank');
                successMessage.classList.add('hidden');
                checkoutModal.classList.add('hidden');
                checkoutForm.reset();
                
                // Vider le panier
                cart = [];
                localStorage.setItem('jezy-cart', JSON.stringify(cart));
                updateCartCount();
                updateCartDisplay();
                cartSidebar.classList.remove('active');
                cartOverlay.classList.remove('active');
            }, 2000);
        }
        
        // Événements
        cartBtn.addEventListener('click', function() {
            updateCartDisplay();
            cartSidebar.classList.add('active');
            cartOverlay.classList.add('active');
        });
        
        closeCart.addEventListener('click', function() {
            cartSidebar.classList.remove('active');
            cartOverlay.classList.remove('active');
        });
        
        cartOverlay.addEventListener('click', function() {
            cartSidebar.classList.remove('active');
            cartOverlay.classList.remove('active');
        });
        
        checkoutBtn.addEventListener('click', function() {
            if (cart.length === 0) {
                alert('Votre panier est vide. Ajoutez des produits avant de passer commande.');
                return;
            }
            checkoutModal.classList.remove('hidden');
            cartSidebar.classList.remove('active');
            cartOverlay.classList.remove('active');
        });
        
        cancelCheckout.addEventListener('click', function() {
            checkoutModal.classList.add('hidden');
        });
        
        checkoutForm.addEventListener('submit', function(e) {
            e.preventDefault();
            sendOrder();
        });
        
        contactForm.addEventListener('submit', function(e) {
            e.preventDefault();
            sendContactMessage();
        });
        
        adminLoginBtn.addEventListener('click', function() {
            adminLoginModal.classList.remove('hidden');
        });
        
        mobileAdminLoginBtn.addEventListener('click', function() {
            adminLoginModal.classList.remove('hidden');
            mobileMenu.classList.add('hidden');
        });
        
        cancelAdminLogin.addEventListener('click', function() {
            adminLoginModal.classList.add('hidden');
        });
        
        adminLoginForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const password = document.getElementById('admin-password').value;
            
            if (password === '1234') {
                adminLoginModal.classList.add('hidden');
                adminPanel.classList.remove('hidden');
                displayAdminProducts();
            } else {
                alert('Mot de passe incorrect');
            }
        });
        
        closeAdmin.addEventListener('click', function() {
            adminPanel.classList.add('hidden');
        });
        
        logoutAdmin.addEventListener('click', function() {
            adminPanel.classList.add('hidden');
        });
        
        addProductBtn.addEventListener('click', function() {
            productForm.reset();
            document.getElementById('product-id').value = '';
            imagePreviewContainer.innerHTML = '';
            productModalTitle.textContent = 'Ajouter un produit';
            productModal.classList.remove('hidden');
        });
        
        cancelProduct.addEventListener('click', function() {
            productModal.classList.add('hidden');
        });
        
        uploadImageBtn.addEventListener('click', function() {
            productImage.click();
        });
        
        productImage.addEventListener('change', function() {
            if (this.files && this.files[0]) {
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    imagePreviewContainer.innerHTML = `
                        <div class="image-preview">
                            <img src="${e.target.result}" alt="Preview">
                            <div class="remove-image" onclick="clearImagePreview()">
                                <i class="fas fa-times"></i>
                            </div>
                        </div>
                    `;
                };
                
                reader.readAsDataURL(this.files[0]);
            }
        });
        
        productForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const productId = document.getElementById('product-id').value;
            const name = document.getElementById('product-name').value;
            const description = document.getElementById('product-description').value;
            const price = parseFloat(document.getElementById('product-price').value);
            const shippingCost = parseFloat(document.getElementById('product-shipping').value);
            const category = document.getElementById('product-category').value;
            
            // Utiliser l'image existante, uploadée ou une image par défaut
            let image = 'https://via.placeholder.com/300x300?text=Produit';
            const imagePreview = imagePreviewContainer.querySelector('img');
            if (imagePreview) {
                image = imagePreview.src;
            }
            
            const productData = {
                id: productId ? parseInt(productId) : null,
                name,
                description,
                price,
                shippingCost,
                category,
                image
            };
            
            try {
                const isNew = !productId;
                await saveProductToSupabase(productData, isNew);
                
                // Fermer le modal
                productModal.classList.add('hidden');
                
                // Actualiser l'affichage admin
                displayAdminProducts();
                
            } catch (error) {
                console.error('Erreur lors de la sauvegarde:', error);
            }
        });
        
        mobileMenuBtn.addEventListener('click', function() {
            mobileMenu.classList.toggle('hidden');
        });
        
        // Fermer le menu mobile en cliquant sur un lien
        document.querySelectorAll('#mobile-menu a').forEach(link => {
            link.addEventListener('click', function() {
                mobileMenu.classList.add('hidden');
            });
        });
        
        // Navigation fluide
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                
                const targetId = this.getAttribute('href');
                if (targetId === '#') return;
                
                const targetElement = document.querySelector(targetId);
                if (targetElement) {
                    window.scrollTo({
                        top: targetElement.offsetTop - 80,
                        behavior: 'smooth'
                    });
                }
            });
        });
        
        // Fonctions utilitaires
        function loadProducts() {
            const savedProducts = localStorage.getItem('jezy-products');
            if (savedProducts) {
                products = JSON.parse(savedProducts);
            }
        }
        
        // Exposer clearImagePreview globalement pour le bouton remove-image
        window.clearImagePreview = clearImagePreview;
    </script>
</body>
    </html>
